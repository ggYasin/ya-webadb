(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[120],{3643:function(e){e.exports={vertex:"precision lowp float;\n\nattribute vec2 aPosition;\nattribute vec2 aLumaPosition;\nattribute vec2 aChromaPosition;\nvarying vec2 vLumaPosition;\nvarying vec2 vChromaPosition;\nvoid main() {\n    gl_Position = vec4(aPosition, 0, 1);\n    vLumaPosition = aLumaPosition;\n    vChromaPosition = aChromaPosition;\n}\n",fragment:"// inspired by https://github.com/mbebenita/Broadway/blob/master/Player/canvas.js\n\nprecision lowp float;\n\nuniform sampler2D uTextureY;\nuniform sampler2D uTextureCb;\nuniform sampler2D uTextureCr;\nvarying vec2 vLumaPosition;\nvarying vec2 vChromaPosition;\nvoid main() {\n   // Y, Cb, and Cr planes are uploaded as LUMINANCE textures.\n   float fY = texture2D(uTextureY, vLumaPosition).x;\n   float fCb = texture2D(uTextureCb, vChromaPosition).x;\n   float fCr = texture2D(uTextureCr, vChromaPosition).x;\n\n   // Premultipy the Y...\n   float fYmul = fY * 1.1643828125;\n\n   // And convert that to RGB!\n   gl_FragColor = vec4(\n     fYmul + 1.59602734375 * fCr - 0.87078515625,\n     fYmul - 0.39176171875 * fCb - 0.81296875 * fCr + 0.52959375,\n     fYmul + 2.017234375   * fCb - 1.081390625,\n     1\n   );\n}\n",vertexStripe:"precision lowp float;\n\nattribute vec2 aPosition;\nattribute vec2 aTexturePosition;\nvarying vec2 vTexturePosition;\n\nvoid main() {\n    gl_Position = vec4(aPosition, 0, 1);\n    vTexturePosition = aTexturePosition;\n}\n",fragmentStripe:"// extra 'stripe' texture fiddling to work around IE 11's poor performance on gl.LUMINANCE and gl.ALPHA textures\n\nprecision lowp float;\n\nuniform sampler2D uStripe;\nuniform sampler2D uTexture;\nvarying vec2 vTexturePosition;\nvoid main() {\n   // Y, Cb, and Cr planes are mapped into a pseudo-RGBA texture\n   // so we can upload them without expanding the bytes on IE 11\n   // which doesn't allow LUMINANCE or ALPHA textures\n   // The stripe textures mark which channel to keep for each pixel.\n   // Each texture extraction will contain the relevant value in one\n   // channel only.\n\n   float fLuminance = dot(\n      texture2D(uStripe, vTexturePosition),\n      texture2D(uTexture, vTexturePosition)\n   );\n\n   gl_FragColor = vec4(fLuminance, fLuminance, fLuminance, 1);\n}\n"}},4862:function(e){!function(){"use strict";function t(e,t){throw new Error("abstract")}t.prototype.drawFrame=function(e){throw new Error("abstract")},t.prototype.clear=function(){throw new Error("abstract")},e.exports=t}()},7280:function(e,t,r){!function(){"use strict";var t=r(4862),i=r(6782);function a(e){var t=this,r=e.getContext("2d"),a=null,n=null,o=null;return t.drawFrame=function(t){var T=t.format;e.width===T.displayWidth&&e.height===T.displayHeight||(e.width=T.displayWidth,e.height=T.displayHeight),null!==a&&a.width==T.width&&a.height==T.height||function(e,t){for(var i=(a=r.createImageData(e,t)).data,n=e*t*4,o=0;o<n;o+=4)i[o+3]=255}(T.width,T.height),i.convertYCbCr(t,a.data);var E,u,R,c=T.cropWidth!=T.displayWidth||T.cropHeight!=T.displayHeight;c?(n||(u=T.cropWidth,R=T.cropHeight,(n=document.createElement("canvas")).width=u,n.height=R,o=n.getContext("2d")),E=o):E=r,E.putImageData(a,-T.cropLeft,-T.cropTop,T.cropLeft,T.cropTop,T.cropWidth,T.cropHeight),c&&r.drawImage(n,0,0,T.displayWidth,T.displayHeight)},t.clear=function(){r.clearRect(0,0,e.width,e.height)},t}a.prototype=Object.create(t.prototype),e.exports=a}()},14:function(e,t,r){!function(){"use strict";var t=r(4862),i=r(3643);function a(e){var t,r,n=this,o=a.contextForCanvas(e);if(null===o)throw new Error("WebGL unavailable");function T(e,t){var r=o.createShader(e);if(o.shaderSource(r,t),o.compileShader(r),!o.getShaderParameter(r,o.COMPILE_STATUS)){var i=o.getShaderInfoLog(r);throw o.deleteShader(r),new Error("GL shader compilation for "+e+" failed: "+i)}return r}var E,u,R,c,f,_,s,m,h,A,l=new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),x={},p={},d={};function v(e,t){return x[e]&&!t||(x[e]=o.createTexture()),x[e]}function U(e,t,r,i,n){var T=v(e,t);if(o.activeTexture(o.TEXTURE0),a.stripe){var E=!x[e+"_temp"]||t,u=v(e+"_temp",t);o.bindTexture(o.TEXTURE_2D,u),E?(o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.NEAREST),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.NEAREST),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,r/4,i,0,o.RGBA,o.UNSIGNED_BYTE,n)):o.texSubImage2D(o.TEXTURE_2D,0,0,0,r/4,i,o.RGBA,o.UNSIGNED_BYTE,n);var R=x[e+"_stripe"],c=!R||t;c&&(R=v(e+"_stripe",t)),o.bindTexture(o.TEXTURE_2D,R),c&&(o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.NEAREST),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.NEAREST),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,r,1,0,o.RGBA,o.UNSIGNED_BYTE,function(e){if(d[e])return d[e];for(var t=e,r=new Uint32Array(t),i=0;i<t;i+=4)r[i]=255,r[i+1]=65280,r[i+2]=16711680,r[i+3]=4278190080;return d[e]=new Uint8Array(r.buffer)}(r)))}else o.bindTexture(o.TEXTURE_2D,T),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR),o.texImage2D(o.TEXTURE_2D,0,o.LUMINANCE,r,i,0,o.LUMINANCE,o.UNSIGNED_BYTE,n)}function P(e,t,i,a){var n=x[e];o.useProgram(r);var T=p[e];T&&!t||(o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,n),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,i,a,0,o.RGBA,o.UNSIGNED_BYTE,null),T=p[e]=o.createFramebuffer()),o.bindFramebuffer(o.FRAMEBUFFER,T),o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,n,0);var s=x[e+"_temp"];o.activeTexture(o.TEXTURE1),o.bindTexture(o.TEXTURE_2D,s),o.uniform1i(_,1);var m=x[e+"_stripe"];o.activeTexture(o.TEXTURE2),o.bindTexture(o.TEXTURE_2D,m),o.uniform1i(f,2),o.bindBuffer(o.ARRAY_BUFFER,E),o.enableVertexAttribArray(u),o.vertexAttribPointer(u,2,o.FLOAT,!1,0,0),o.bindBuffer(o.ARRAY_BUFFER,R),o.enableVertexAttribArray(c),o.vertexAttribPointer(c,2,o.FLOAT,!1,0,0),o.viewport(0,0,i,a),o.drawArrays(o.TRIANGLES,0,l.length/2),o.bindFramebuffer(o.FRAMEBUFFER,null)}function g(e,r,i){o.activeTexture(r),o.bindTexture(o.TEXTURE_2D,x[e]),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR),o.uniform1i(o.getUniformLocation(t,e),i)}function b(e,t){var r=T(o.VERTEX_SHADER,e),i=T(o.FRAGMENT_SHADER,t),a=o.createProgram();if(o.attachShader(a,r),o.attachShader(a,i),o.linkProgram(a),!o.getProgramParameter(a,o.LINK_STATUS)){var n=o.getProgramInfoLog(a);throw o.deleteProgram(a),new Error("GL program linking failed: "+n)}return a}return n.drawFrame=function(T){var x=T.format,p=!t||e.width!==x.displayWidth||e.height!==x.displayHeight;if(p&&(e.width=x.displayWidth,e.height=x.displayHeight,n.clear()),t||function(){if(a.stripe){r=b(i.vertexStripe,i.fragmentStripe),o.getAttribLocation(r,"aPosition"),R=o.createBuffer();var e=new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]);o.bindBuffer(o.ARRAY_BUFFER,R),o.bufferData(o.ARRAY_BUFFER,e,o.STATIC_DRAW),c=o.getAttribLocation(r,"aTexturePosition"),f=o.getUniformLocation(r,"uStripe"),_=o.getUniformLocation(r,"uTexture")}t=b(i.vertex,i.fragment),E=o.createBuffer(),o.bindBuffer(o.ARRAY_BUFFER,E),o.bufferData(o.ARRAY_BUFFER,l,o.STATIC_DRAW),u=o.getAttribLocation(t,"aPosition"),s=o.createBuffer(),m=o.getAttribLocation(t,"aLumaPosition"),h=o.createBuffer(),A=o.getAttribLocation(t,"aChromaPosition")}(),p){var d=function(e,t,r){var i=x.cropLeft/r,a=(x.cropLeft+x.cropWidth)/r,n=(x.cropTop+x.cropHeight)/x.height,T=x.cropTop/x.height,E=new Float32Array([i,n,a,n,i,T,i,T,a,n,a,T]);o.bindBuffer(o.ARRAY_BUFFER,e),o.bufferData(o.ARRAY_BUFFER,E,o.STATIC_DRAW)};d(s,0,T.y.stride),d(h,0,T.u.stride*x.width/x.chromaWidth)}U("uTextureY",p,T.y.stride,x.height,T.y.bytes),U("uTextureCb",p,T.u.stride,x.chromaHeight,T.u.bytes),U("uTextureCr",p,T.v.stride,x.chromaHeight,T.v.bytes),a.stripe&&(P("uTextureY",p,T.y.stride,x.height),P("uTextureCb",p,T.u.stride,x.chromaHeight),P("uTextureCr",p,T.v.stride,x.chromaHeight)),o.useProgram(t),o.viewport(0,0,e.width,e.height),g("uTextureY",o.TEXTURE0,0),g("uTextureCb",o.TEXTURE1,1),g("uTextureCr",o.TEXTURE2,2),o.bindBuffer(o.ARRAY_BUFFER,E),o.enableVertexAttribArray(u),o.vertexAttribPointer(u,2,o.FLOAT,!1,0,0),o.bindBuffer(o.ARRAY_BUFFER,s),o.enableVertexAttribArray(m),o.vertexAttribPointer(m,2,o.FLOAT,!1,0,0),o.bindBuffer(o.ARRAY_BUFFER,h),o.enableVertexAttribArray(A),o.vertexAttribPointer(A,2,o.FLOAT,!1,0,0),o.drawArrays(o.TRIANGLES,0,l.length/2)},n.clear=function(){o.viewport(0,0,e.width,e.height),o.clearColor(0,0,0,0),o.clear(o.COLOR_BUFFER_BIT)},n.clear(),n}a.stripe=!0,a.contextForCanvas=function(e){var t={preferLowPowerToHighPerformance:!0,powerPreference:"low-power",failIfMajorPerformanceCaveat:!0,preserveDrawingBuffer:!0};return e.getContext("webgl",t)||e.getContext("experimental-webgl",t)},a.isAvailable=function(){var e,t=document.createElement("canvas");t.width=1,t.height=1;try{e=a.contextForCanvas(t)}catch(u){return!1}if(e){var r=e.TEXTURE0,i=e.createTexture(),n=new Uint8Array(16),o=a.stripe?1:4,T=a.stripe?e.RGBA:e.LUMINANCE,E=a.stripe?e.NEAREST:e.LINEAR;return e.activeTexture(r),e.bindTexture(e.TEXTURE_2D,i),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,E),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,E),e.texImage2D(e.TEXTURE_2D,0,T,o,4,0,T,e.UNSIGNED_BYTE,n),!e.getError()}return!1},a.prototype=Object.create(t.prototype),e.exports=a}()},6782:function(e,t,r){!function(){"use strict";var t=r(5406);e.exports={convertYCbCr:function(e,r){var i=0|e.format.width,a=0|e.format.height,n=0|t(e.format.width/e.format.chromaWidth),o=0|t(e.format.height/e.format.chromaHeight),T=e.y.bytes,E=e.u.bytes,u=e.v.bytes,R=0|e.y.stride,c=0|e.u.stride,f=0|e.v.stride,_=i<<2,s=0,m=0,h=0,A=0,l=0,x=0,p=0,d=0,v=0,U=0,P=0,g=0,b=0,D=0,L=0,X=0,w=0,C=0;if(1==n&&1==o)for(p=0,d=_,C=0,X=0;X<a;X+=2){for(h=(m=X*R|0)+R|0,A=C*c|0,l=C*f|0,L=0;L<i;L+=2)v=0|E[A++],g=(409*(U=0|u[l++])|0)-57088|0,b=(100*v|0)+(208*U|0)-34816|0,D=(516*v|0)-70912|0,P=298*T[m++]|0,r[p]=P+g>>8,r[p+1]=P-b>>8,r[p+2]=P+D>>8,p+=4,P=298*T[m++]|0,r[p]=P+g>>8,r[p+1]=P-b>>8,r[p+2]=P+D>>8,p+=4,P=298*T[h++]|0,r[d]=P+g>>8,r[d+1]=P-b>>8,r[d+2]=P+D>>8,d+=4,P=298*T[h++]|0,r[d]=P+g>>8,r[d+1]=P-b>>8,r[d+2]=P+D>>8,d+=4;p+=_,d+=_,C++}else for(x=0,X=0;X<a;X++)for(w=0,s=X*R|0,A=(C=X>>o)*c|0,l=C*f|0,L=0;L<i;L++)v=0|E[A+(w=L>>n)],g=(409*(U=0|u[l+w])|0)-57088|0,b=(100*v|0)+(208*U|0)-34816|0,D=(516*v|0)-70912|0,P=298*T[s++]|0,r[x]=P+g>>8,r[x+1]=P-b>>8,r[x+2]=P+D>>8,x+=4}}}()},5406:function(e){!function(){"use strict";e.exports=function(e){for(var t=0,r=e>>1;0!=r;)r>>=1,t++;if(e!==1<<t)throw"chroma plane dimensions must be power of 2 ratio to luma plane dimensions; got "+e;return t}}()},8120:function(e,t,r){!function(){"use strict";var t=r(4862),i=r(7280),a=r(14),n={FrameSink:t,SoftwareFrameSink:i,WebGLFrameSink:a,attach:function(e,t){return("webGL"in(t=t||{})?t.webGL:a.isAvailable())?new a(e,t):new i(e,t)}};e.exports=n}()}}]);
//# sourceMappingURL=120.3db77f55048bd38c.js.map